
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Working with DataFrames &#8212; A Gentle Introduction to Predictive Modelling</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2. Linear Models and Overfitting" href="../2_linear_models/index.html" />
    <link rel="prev" title="Introduction to python" href="python_intro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QPT1100TCY"></script>
<script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){ dataLayer.push(arguments); }
                    gtag('js', new Date());
                    gtag('config', 'G-QPT1100TCY');
                </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">A Gentle Introduction to Predictive Modelling</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../introduction.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   1. Python Basics
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="python_intro.html">
     Introduction to python
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Working with DataFrames
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../2_linear_models/index.html">
   2. Linear Models and Overfitting
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../2_linear_models/theory_linear_models.html">
     Linear Models: a Brief Theory
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../2_linear_models/practice_linear_models.html">
     Linear Model in action
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../2_linear_models/overfitting_ex.html">
     The first Villain: overfitting
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../3_cross_validation/index.html">
   3. Unbiased predictive performance estimates
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../3_cross_validation/train_test.html">
     Training and Test sets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../3_cross_validation/cv.html">
     Cross-validation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../4_reducing_complexity/index.html">
   4. Fighting Overfitting - The Advent of Machine Learning
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_reducing_complexity/theory_regularization.html">
     Feature Reduction and Regularization: a brief theory
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_reducing_complexity/practice_regularization.html">
     Regularized Models in Action
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../4_reducing_complexity/leakage.html">
     The Second Villain: Feature Leakage
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../5_hyperparameter_optimization/index.html">
   5. Hyperparameter Optimization and Nested Cross-Validation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_hyperparameter_optimization/cross_validation_revisited.html">
     Cross-validation Revisited
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../5_hyperparameter_optimization/nested_cross_validation.html">
     Nested Cross-validation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../6_validity/index.html">
   6. Generalizability, Validity,  Fairness
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../6_validity/generalizability.html">
     Generalizability
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../6_validity/validity.html">
     Validity and specificity
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../6_validity/fairness.html">
     Fairness
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../7_model_explanation/index.html">
   7. Model Explanation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../7_model_explanation/classical.html">
     Explainability of “Classical” Models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../7_model_explanation/black_box.html">
     Explainability vs. Black Box Models
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../8_complex_models/index.html">
   8. Complex Models: from Ensembles to Deep Learning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../9_examples/index.html">
   9. Scientific Examples
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../references.html">
   References
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/1_python_basics/data_frames.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/pni-lab/predmod_lecture"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/pni-lab/predmod_lecture/issues/new?title=Issue%20on%20page%20%2F1_python_basics/data_frames.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/pni-lab/predmod_lecture/master?urlpath=tree/contents/1_python_basics/data_frames.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/pni-lab/predmod_lecture/blob/master/contents/1_python_basics/data_frames.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#importing-packages">
   Importing packages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-some-data">
   Loading some data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dataframe-slicing">
   Dataframe slicing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plotting">
   Plotting
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Working with DataFrames</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#importing-packages">
   Importing packages
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loading-some-data">
   Loading some data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dataframe-slicing">
   Dataframe slicing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plotting">
   Plotting
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="working-with-dataframes">
<h1>Working with DataFrames<a class="headerlink" href="#working-with-dataframes" title="Permalink to this headline">¶</a></h1>
<p>Now we will go to a territory which might be somewhat familiar if you have previously used R (or Matlab). We will import some packages, read the contents of a file and store it in a data-frame.</p>
<section id="importing-packages">
<h2>Importing packages<a class="headerlink" href="#importing-packages" title="Permalink to this headline">¶</a></h2>
<p>One of the great things about python that very often you don ‘t have to implement something yourself. It may be already implemented in the many freely accessible python packages, often referred to as the python ecosystem.</p>
<p>If you are working on your local computer, you can install python packages e.g. with the tools <a class="reference external" href="https://pip.pypa.io/en/stable/getting-started/">pip</a> or <a class="reference external" href="https://docs.conda.io/en/latest/">conda</a>.</p>
<p>Inside a notebook, hosted on the cloud (e.g. Google Colab), you can install packages via the following code.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip install pandas nilearn
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: pandas in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (1.3.2)
Requirement already satisfied: nilearn in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (0.8.0)
Requirement already satisfied: python-dateutil&gt;=2.7.3 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from pandas) (2.8.2)
Requirement already satisfied: pytz&gt;=2017.3 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from pandas) (2021.1)
Requirement already satisfied: numpy&gt;=1.17.3 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from pandas) (1.19.5)
Requirement already satisfied: joblib&gt;=0.12 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from nilearn) (1.0.1)
Requirement already satisfied: scipy&gt;=1.2 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from nilearn) (1.7.1)
Requirement already satisfied: requests&gt;=2 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from nilearn) (2.26.0)
Requirement already satisfied: nibabel&gt;=2.5 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from nilearn) (3.2.1)
Requirement already satisfied: scikit-learn&gt;=0.21 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from nilearn) (0.24.2)
Requirement already satisfied: packaging&gt;=14.3 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from nibabel&gt;=2.5-&gt;nilearn) (21.0)
Requirement already satisfied: pyparsing&gt;=2.0.2 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from packaging&gt;=14.3-&gt;nibabel&gt;=2.5-&gt;nilearn) (2.4.7)
Requirement already satisfied: six&gt;=1.5 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from python-dateutil&gt;=2.7.3-&gt;pandas) (1.16.0)
Requirement already satisfied: certifi&gt;=2017.4.17 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from requests&gt;=2-&gt;nilearn) (2021.5.30)
Requirement already satisfied: charset-normalizer~=2.0.0 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from requests&gt;=2-&gt;nilearn) (2.0.4)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from requests&gt;=2-&gt;nilearn) (3.2)
Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from requests&gt;=2-&gt;nilearn) (1.26.6)
Requirement already satisfied: threadpoolctl&gt;=2.0.0 in /home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages (from scikit-learn&gt;=0.21-&gt;nilearn) (2.2.0)
<span class=" -Color -Color-Yellow">WARNING: You are using pip version 21.2.4; however, version 22.0.3 is available.</span>
<span class=" -Color -Color-Yellow">You should consider upgrading via the &#39;/home/tspisak/src/RPN-signature/venv/bin/python -m pip install --upgrade pip&#39; command.</span>
</pre></div>
</div>
</div>
</div>
<aside class="margin sidebar">
<p class="sidebar-title">Dependencies in Binder</p>
<p>When launching this notebook interactively via Binder, all dependnecies will already be installed, so this command will have no actual effect. On Google Coleb, there are no costum packages installed, so the rest of this notebook will not function without running this command.</p>
</aside>
<p>This command installed two packages needed for the rest of this notebook: <a class="reference external" href="https://pandas.pydata.org/">pandas</a> and <a class="reference external" href="https://nilearn.github.io/stable/index.html">nilearn</a>.</p>
<p>Once a package is installed on the system, the only thing we must do is to import the packages, in order to tell python that we intend to use it in your code.</p>
<p>Now, we will import the package called <a class="reference external" href="https://pandas.pydata.org/">pandas</a>, a package that provides powerful R-like dataframes to store and manipulate your data.
For convenience, we also specify that from now on, we would like to refer to pandas as pd, for short.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="loading-some-data">
<h2>Loading some data<a class="headerlink" href="#loading-some-data" title="Permalink to this headline">¶</a></h2>
<p>Now let’s load some example data. Throughout the book, we will use brain cortical volume data obtained from the publicly available <a class="reference external" href="https://brain-development.org/ixi-dataset/">“Information eXtraction from Images” (IXI) dataset</a></p>
<aside class="margin sidebar">
<p class="sidebar-title">License info</p>
<p>The IXI dataset is made available under the Creative Commons <a class="reference external" href="https://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0</a> license. If you use the IXI data please acknowledge the source of the IXI data.</p>
</aside>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See supplement X for how raw IXI anatomical MRI data was processed with <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/">Freesurfer</a>.
For more information on analyzing anatomical MR images with Freesurfer e.g. on <a class="reference external" href="https://www.andysbrainblog.com/andysbrainblog/2018/11/27/introduction-to-freesurfer">Andy’s blog</a>.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/pni-lab/predmod_lecture/master/ex_data/IXI/ixi.csv&quot;</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Age</th>
      <th>lh_bankssts_volume</th>
      <th>lh_caudalanteriorcingulate_volume</th>
      <th>lh_caudalmiddlefrontal_volume</th>
      <th>lh_cuneus_volume</th>
      <th>lh_entorhinal_volume</th>
      <th>lh_fusiform_volume</th>
      <th>lh_inferiorparietal_volume</th>
      <th>lh_inferiortemporal_volume</th>
      <th>...</th>
      <th>rh_rostralanteriorcingulate_volume</th>
      <th>rh_rostralmiddlefrontal_volume</th>
      <th>rh_superiorfrontal_volume</th>
      <th>rh_superiorparietal_volume</th>
      <th>rh_superiortemporal_volume</th>
      <th>rh_supramarginal_volume</th>
      <th>rh_frontalpole_volume</th>
      <th>rh_temporalpole_volume</th>
      <th>rh_transversetemporal_volume</th>
      <th>rh_insula_volume</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>35.800137</td>
      <td>2188</td>
      <td>2368</td>
      <td>6562</td>
      <td>2459</td>
      <td>1561</td>
      <td>9281</td>
      <td>14136</td>
      <td>10797</td>
      <td>...</td>
      <td>2555</td>
      <td>17309</td>
      <td>21210</td>
      <td>12291</td>
      <td>12287</td>
      <td>10848</td>
      <td>1033</td>
      <td>2269</td>
      <td>1170</td>
      <td>6915</td>
    </tr>
    <tr>
      <th>1</th>
      <td>12</td>
      <td>38.781656</td>
      <td>2717</td>
      <td>2626</td>
      <td>6621</td>
      <td>3170</td>
      <td>2835</td>
      <td>8870</td>
      <td>14813</td>
      <td>11961</td>
      <td>...</td>
      <td>3260</td>
      <td>19044</td>
      <td>24651</td>
      <td>13871</td>
      <td>13948</td>
      <td>11975</td>
      <td>1100</td>
      <td>2865</td>
      <td>1167</td>
      <td>6941</td>
    </tr>
    <tr>
      <th>2</th>
      <td>13</td>
      <td>46.710472</td>
      <td>2101</td>
      <td>2488</td>
      <td>5437</td>
      <td>2347</td>
      <td>1859</td>
      <td>9200</td>
      <td>16900</td>
      <td>11675</td>
      <td>...</td>
      <td>2682</td>
      <td>17653</td>
      <td>23804</td>
      <td>10977</td>
      <td>12931</td>
      <td>15127</td>
      <td>975</td>
      <td>2099</td>
      <td>1032</td>
      <td>7395</td>
    </tr>
    <tr>
      <th>3</th>
      <td>14</td>
      <td>34.236824</td>
      <td>1925</td>
      <td>1983</td>
      <td>5153</td>
      <td>2497</td>
      <td>2207</td>
      <td>7686</td>
      <td>12786</td>
      <td>8433</td>
      <td>...</td>
      <td>2120</td>
      <td>15070</td>
      <td>21001</td>
      <td>10993</td>
      <td>10890</td>
      <td>10453</td>
      <td>891</td>
      <td>2122</td>
      <td>958</td>
      <td>6063</td>
    </tr>
    <tr>
      <th>4</th>
      <td>15</td>
      <td>24.284736</td>
      <td>2535</td>
      <td>1802</td>
      <td>5461</td>
      <td>2496</td>
      <td>1875</td>
      <td>6859</td>
      <td>14187</td>
      <td>7897</td>
      <td>...</td>
      <td>2825</td>
      <td>13027</td>
      <td>21865</td>
      <td>10651</td>
      <td>12686</td>
      <td>11400</td>
      <td>1185</td>
      <td>2207</td>
      <td>1344</td>
      <td>8218</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>633</th>
      <td>648</td>
      <td>47.723477</td>
      <td>2009</td>
      <td>2270</td>
      <td>5439</td>
      <td>2684</td>
      <td>1729</td>
      <td>9029</td>
      <td>13407</td>
      <td>10971</td>
      <td>...</td>
      <td>3236</td>
      <td>15464</td>
      <td>21427</td>
      <td>11524</td>
      <td>12869</td>
      <td>11373</td>
      <td>814</td>
      <td>2419</td>
      <td>1360</td>
      <td>7423</td>
    </tr>
    <tr>
      <th>634</th>
      <td>651</td>
      <td>50.395619</td>
      <td>1776</td>
      <td>1532</td>
      <td>5797</td>
      <td>2954</td>
      <td>1992</td>
      <td>9131</td>
      <td>13201</td>
      <td>9005</td>
      <td>...</td>
      <td>2146</td>
      <td>11883</td>
      <td>18137</td>
      <td>13668</td>
      <td>10833</td>
      <td>8420</td>
      <td>751</td>
      <td>2304</td>
      <td>1010</td>
      <td>6032</td>
    </tr>
    <tr>
      <th>635</th>
      <td>652</td>
      <td>42.989733</td>
      <td>2315</td>
      <td>1898</td>
      <td>6234</td>
      <td>3285</td>
      <td>1857</td>
      <td>10453</td>
      <td>15412</td>
      <td>10639</td>
      <td>...</td>
      <td>2931</td>
      <td>16905</td>
      <td>25113</td>
      <td>13148</td>
      <td>14489</td>
      <td>13440</td>
      <td>731</td>
      <td>2725</td>
      <td>1525</td>
      <td>7481</td>
    </tr>
    <tr>
      <th>636</th>
      <td>653</td>
      <td>46.220397</td>
      <td>2411</td>
      <td>2033</td>
      <td>5808</td>
      <td>4012</td>
      <td>2854</td>
      <td>9723</td>
      <td>16169</td>
      <td>12070</td>
      <td>...</td>
      <td>2637</td>
      <td>15636</td>
      <td>19449</td>
      <td>13207</td>
      <td>13480</td>
      <td>11459</td>
      <td>1049</td>
      <td>2855</td>
      <td>1078</td>
      <td>7186</td>
    </tr>
    <tr>
      <th>637</th>
      <td>662</td>
      <td>41.741273</td>
      <td>2482</td>
      <td>1923</td>
      <td>4686</td>
      <td>3738</td>
      <td>1910</td>
      <td>10996</td>
      <td>16778</td>
      <td>10390</td>
      <td>...</td>
      <td>3492</td>
      <td>16781</td>
      <td>20968</td>
      <td>13379</td>
      <td>15787</td>
      <td>12850</td>
      <td>1069</td>
      <td>2521</td>
      <td>1062</td>
      <td>7931</td>
    </tr>
  </tbody>
</table>
<p>638 rows × 70 columns</p>
</div></div></div>
</div>
<p>The first two columns of our example dataframe are participant ID and age, then we have a total of 68 cortical volume values, each computed in 34 regions.
Rows correspond to participants: a total of N=638.
The brain regions were delineated by the as based on the Destrieux brain atlas <span id="id1">[<a class="reference internal" href="../references.html#id78">5</a>]</span>, shown below.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nilearn</span> <span class="kn">import</span> <span class="n">datasets</span><span class="p">,</span> <span class="n">plotting</span>

<span class="n">destrieux_atlas</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">fetch_atlas_surf_destrieux</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">fsaverage</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">fetch_surf_fsaverage</span><span class="p">()</span>
<span class="n">plotting</span><span class="o">.</span><span class="n">plot_surf_roi</span><span class="p">(</span><span class="n">fsaverage</span><span class="p">[</span><span class="s1">&#39;pial_left&#39;</span><span class="p">],</span> <span class="n">roi_map</span><span class="o">=</span><span class="n">destrieux_atlas</span><span class="p">[</span><span class="s1">&#39;map_left&#39;</span><span class="p">],</span>
                       <span class="n">hemi</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s1">&#39;lateral&#39;</span><span class="p">,</span>
                       <span class="n">bg_map</span><span class="o">=</span><span class="n">fsaverage</span><span class="p">[</span><span class="s1">&#39;sulc_left&#39;</span><span class="p">],</span> <span class="n">bg_on_data</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plotting</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/tspisak/src/RPN-signature/venv/lib/python3.8/site-packages/nilearn/datasets/__init__.py:86: FutureWarning: Fetchers from the nilearn.datasets module will be updated in version 0.9 to return python strings instead of bytes and Pandas dataframes instead of Numpy arrays.
  warn(&quot;Fetchers from the nilearn.datasets module will be &quot;
</pre></div>
</div>
<img alt="../_images/data_frames_9_1.png" src="../_images/data_frames_9_1.png" />
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Click on “Click to show” to reveal the python code used for visualizing the atlas. Visualization was done with the python package ‘<a class="reference external" href="https://nilearn.github.io/stable/index.html">nilearn</a>’.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Nilearn is a very powerful package for machin elearning with neuroimaging. Check out the nilearn <a class="reference external" href="https://nilearn.github.io/stable/auto_examples/index.html">example gallery</a> to have a better impression.</p>
</div>
</section>
<section id="dataframe-slicing">
<h2>Dataframe slicing<a class="headerlink" href="#dataframe-slicing" title="Permalink to this headline">¶</a></h2>
<p>You can get one or multiple columns from a dataframe by slicing it. Let’s extract the age of the participants.</p>
<aside class="margin sidebar">
<p class="sidebar-title">Tip</p>
<p>The output of these commands are hidden by default, click to reveal.</p>
</aside>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0      35.800137
1      38.781656
2      46.710472
3      34.236824
4      24.284736
         ...    
633    47.723477
634    50.395619
635    42.989733
636    46.220397
637    41.741273
Name: Age, Length: 638, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Now let’s slice the data frame to obtain ID, Age and the volume of the brain region called right superior frontal cortex and obtain the first 5 participants only.
To do so you must slice with a list of column names, that’s whz we have double square brackets (outer: slicing, inner: list). Then we call head, to get the ‘head’ of the table.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_superiorfrontal</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;rh_superiorfrontal_volume&#39;</span><span class="p">]]</span>
<span class="n">df_superiorfrontal</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Age</th>
      <th>rh_superiorfrontal_volume</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>35.800137</td>
      <td>21210</td>
    </tr>
    <tr>
      <th>1</th>
      <td>12</td>
      <td>38.781656</td>
      <td>24651</td>
    </tr>
    <tr>
      <th>2</th>
      <td>13</td>
      <td>46.710472</td>
      <td>23804</td>
    </tr>
    <tr>
      <th>3</th>
      <td>14</td>
      <td>34.236824</td>
      <td>21001</td>
    </tr>
    <tr>
      <th>4</th>
      <td>15</td>
      <td>24.284736</td>
      <td>21865</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>It is very easy to filter you data frame by the values of one of the columns.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_superiorfrontal</span><span class="p">[</span><span class="n">df_superiorfrontal</span><span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Age</th>
      <th>rh_superiorfrontal_volume</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>35.800137</td>
      <td>21210</td>
    </tr>
    <tr>
      <th>1</th>
      <td>12</td>
      <td>38.781656</td>
      <td>24651</td>
    </tr>
    <tr>
      <th>2</th>
      <td>13</td>
      <td>46.710472</td>
      <td>23804</td>
    </tr>
    <tr>
      <th>3</th>
      <td>14</td>
      <td>34.236824</td>
      <td>21001</td>
    </tr>
    <tr>
      <th>5</th>
      <td>16</td>
      <td>55.167693</td>
      <td>20534</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>633</th>
      <td>648</td>
      <td>47.723477</td>
      <td>21427</td>
    </tr>
    <tr>
      <th>634</th>
      <td>651</td>
      <td>50.395619</td>
      <td>18137</td>
    </tr>
    <tr>
      <th>635</th>
      <td>652</td>
      <td>42.989733</td>
      <td>25113</td>
    </tr>
    <tr>
      <th>636</th>
      <td>653</td>
      <td>46.220397</td>
      <td>19449</td>
    </tr>
    <tr>
      <th>637</th>
      <td>662</td>
      <td>41.741273</td>
      <td>20968</td>
    </tr>
  </tbody>
</table>
<p>534 rows × 3 columns</p>
</div></div></div>
</div>
</section>
<section id="plotting">
<h2>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h2>
<p>Pandas dataframes provide build-in plotting functions.
Let’s see how the age of the participants is distributed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="s1">&#39;Age&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[&lt;AxesSubplot:title={&#39;center&#39;:&#39;Age&#39;}&gt;]], dtype=object)
</pre></div>
</div>
<img alt="../_images/data_frames_18_1.png" src="../_images/data_frames_18_1.png" />
</div>
</div>
<p>Now, let’s plot the volume of our previously selected brain region against age.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;rh_superiorfrontal_volume&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;Age&#39;, ylabel=&#39;rh_superiorfrontal_volume&#39;&gt;
</pre></div>
</div>
<img alt="../_images/data_frames_20_1.png" src="../_images/data_frames_20_1.png" />
</div>
</div>
<p>Looks like an inverse association…
In the next section, we will see how we can take advantage of this single association in order to predict the age of a participant. And also how we can get into trouble when we want to improve the prediction by adding more regions.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Pandas has an excellent leighweight <a class="reference external" href="https://pandas.pydata.org/docs/getting_started/index.html">“Getting Started”</a> tutorial.</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Excercise 1.2</p>
<p>Launch this notebook interactively in Google Colab (by clicking the rocket) and modify the code to plot out other variables, e.g. <code class="docutils literal notranslate"><span class="pre">rh_superiorfrontal_volume</span></code> vs. <code class="docutils literal notranslate"><span class="pre">lh_superiorfrontal_volume</span></code>.</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Excercise 1.3</p>
<p>Launch this notebook interactively in Google Colab (by clicking the rocket) and modify it to load in your own dataset.
You can directly upload your dataset file in colab (Select “Files” on the left) or you can also mount your google drive account.</p>
<p>Is you dataframe as Excel spreadsheet? No problem! Check out the function <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_excel.html">read_excel</a> in pandas.</p>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "pni-lab/predmod_lecture",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./1_python_basics"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="python_intro.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Introduction to python</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../2_linear_models/index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">2. Linear Models and Overfitting</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Tamas Spisak<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>